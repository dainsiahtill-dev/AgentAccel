VERIFICATION_START phase1_semantic_cache_rule_constraint_20260212_02 2026-02-12T02:37:14.6997881Z
ENV branch=main commit=fd6de56d861c34f75b7e765e1c7dc0843a7a1ad9 python=3.14.2 (tags/v3.14.2:df79316, Dec  5 2025, 17:18:21) [MSC v.1944 64 bit (AMD64)]
CMD python -m ruff check .
EXIT_CODE 1
F401 [*] `time` imported but unused
 --> test_async_verify.py:1:8
  |
1 | import time
  |        ^^^^
2 | import threading
3 | from pathlib import Path
  |
help: Remove unused import: `time`

F401 [*] `threading` imported but unused
 --> test_async_verify.py:2:8
  |
1 | import time
2 | import threading
  |        ^^^^^^^^^
3 | from pathlib import Path
4 | from accel.verify.job_manager import JobManager, JobState
  |
help: Remove unused import: `threading`

F401 [*] `pathlib.Path` imported but unused
 --> test_async_verify.py:3:21
  |
1 | import time
2 | import threading
3 | from pathlib import Path
  |                     ^^^^
4 | from accel.verify.job_manager import JobManager, JobState
5 | from accel.verify.callbacks import VerifyProgressCallback, VerifyStage
  |
help: Remove unused import: `pathlib.Path`

F401 [*] `accel.config.resolve_effective_config` imported but unused
 --> test_async_verify.py:6:26
  |
4 | from accel.verify.job_manager import JobManager, JobState
5 | from accel.verify.callbacks import VerifyProgressCallback, VerifyStage
6 | from accel.config import resolve_effective_config
  |                          ^^^^^^^^^^^^^^^^^^^^^^^^
7 |
8 | class TestCallback(VerifyProgressCallback):
  |
help: Remove unused import: `accel.config.resolve_effective_config`

F541 [*] f-string without any placeholders
   --> test_async_verify.py:107:7
    |
105 | for field in required_fields:
106 |     assert field in status, f"Status should contain '{field}'"
107 | print(f"   Status contains all required fields")
    |       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
108 | print(f"   Sample status: {status}")
109 | print("   OK: Job status format is correct")
    |
help: Remove extraneous `f` prefix

F401 [*] `time` imported but unused
 --> test_tool_api.py:1:8
  |
1 | import time
  |        ^^^^
2 | import inspect
3 | from accel.mcp_server import create_server
  |
help: Remove unused import: `time`

E402 Module level import not at top of file
  --> test_tool_api.py:27:1
   |
25 | # Check the original tool function
26 | print("\nChecking original tool function...")
27 | from accel.mcp_server import create_server
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
28 | import accel.mcp_server as ms
   |

E402 Module level import not at top of file
  --> test_tool_api.py:28:1
   |
26 | print("\nChecking original tool function...")
27 | from accel.mcp_server import create_server
28 | import accel.mcp_server as ms
   | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
29 |
30 | # Get the actual function
   |

F401 [*] `threading` imported but unused
 --> test_verify_blocking.py:2:8
  |
1 | import time
2 | import threading
  |        ^^^^^^^^^
3 | from concurrent.futures import ThreadPoolExecutor, TimeoutError as FuturesTimeoutError
  |
help: Remove unused import: `threading`

Found 9 errors.
[*] 7 fixable with the `--fix` option.
CMD python -m mypy .
EXIT_CODE 1
accel\verify\runners.py:88: error: Module has no attribute "getpgid"; maybe "getpid" or "getppid"?  [attr-defined]
accel\verify\runners.py:91: error: Module has no attribute "getpgid"; maybe "getpid" or "getppid"?  [attr-defined]
accel\verify\runners.py:91: error: Module has no attribute "SIGKILL"; maybe "SIGILL"?  [attr-defined]
accel\verify\runners.py:125: error: Module has no attribute "setsid"  [attr-defined]
accel\verify\job_manager.py:171: error: Cannot determine type of "_initialized"  [has-type]
accel\verify\job_manager.py:175: error: Cannot determine type of "_initialized"  [has-type]
accel\storage\state_db.py:20: error: Missing return statement  [return]
test_async_verify.py:21: error: Signature of "on_command_complete" incompatible with supertype "accel.verify.callbacks.VerifyProgressCallback"  [override]
test_async_verify.py:21: note:      Superclass:
test_async_verify.py:21: note:          def on_command_complete(self, job_id: str, command: str, exit_code: int, duration: float, *, completed: int | None = ..., total: int | None = ..., stdout_tail: str = ..., stderr_tail: str = ...) -> None
test_async_verify.py:21: note:      Subclass:
test_async_verify.py:21: note:          def on_command_complete(self, job_id: str, command: str, exit_code: int, duration: float) -> None
test_async_verify.py:27: error: Signature of "on_heartbeat" incompatible with supertype "accel.verify.callbacks.VerifyProgressCallback"  [override]
test_async_verify.py:27: note:      Superclass:
test_async_verify.py:27: note:          def on_heartbeat(self, job_id: str, elapsed_sec: float, eta_sec: float | None, state: str, *, current_command: str = ..., command_elapsed_sec: float | None = ..., command_timeout_sec: float | None = ..., command_progress_pct: float | None = ...) -> None
test_async_verify.py:27: note:      Subclass:
test_async_verify.py:27: note:          def on_heartbeat(self, job_id: str, elapsed_sec: float, eta_sec: float | None, state: str) -> None
test_tool_api.py:13: error: Too many arguments  [call-arg]
test_tool_api.py:13: error: Argument 1 has incompatible type "str"; expected "Callable[..., Any]"  [arg-type]
test_tool_api.py:20: error: Unexpected keyword argument "project"  [call-arg]
test_tool_api.py:31: error: Module has no attribute "accel_verify_start"  [attr-defined]
test_tool_api.py:32: error: Module has no attribute "accel_verify_start"  [attr-defined]
tests\unit\test_mcp_server.py:781: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:782: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:783: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:821: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:851: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:936: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:937: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:938: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1003: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1004: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1005: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1090: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1091: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1092: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1093: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1186: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1187: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1252: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1253: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1310: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1311: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1373: error: "Tool" has no attribute "fn"  [attr-defined]
tests\unit\test_mcp_server.py:1426: error: "Tool" has no attribute "fn"  [attr-defined]
Found 37 errors in 6 files (checked 50 source files)
CMD python -m pytest -q tests/unit
EXIT_CODE 0
...................................................................      [100%]
67 passed in 8.45s
CMD set PYTHONPATH=x:\MCPs\agent-accel&& python .harborpilot/tmp/mcp_regression_phase1_semantic_cache_rule_constraint_20260212_02.py
EXIT_CODE 0
{"index_update": {"status": "ok", "files": 380}, "context": {"status": "ok", "token_reduction_ratio": 0.994702, "cache_first_hit": true, "cache_second_hit": true, "compression_saved_chars": 85, "constraint_repair_count": 1}, "verify_start": {"status": "started", "job_id": "verify_5df14028967a"}, "verify": {"status_seen": ["running", "completed"], "cancel_status": "completed", "final_state": "completed", "events_latest_state": "completed", "events_state_source": "status_terminal", "events_count": 7}}
VERIFICATION_END phase1_semantic_cache_rule_constraint_20260212_02 2026-02-12T02:37:31.2026718Z
DEGRADE_REASON: full gate has pre-existing baseline failures (ruff/mypy) outside this phase scope
RISK: full static gate not green; runtime behavior validated via unit tests + mcp regression script
BACKFILL_PLAN: owner=codex commands="python -m ruff check . && python -m mypy ." deadline_utc=2026-02-13T00:00:00Z
MCP_TRANSPORT_CHECK tool=accel_index_update result=transport_closed detail="tools/call failed: Transport closed"
