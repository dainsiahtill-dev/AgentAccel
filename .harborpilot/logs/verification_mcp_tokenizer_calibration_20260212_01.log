VERIFICATION_START mcp_tokenizer_calibration_20260212_01 2026-02-11T23:04:47.896623+00:00
ENV_CMD git rev-parse --abbrev-ref HEAD
EXIT 0
OUTPUT main
ENV_CMD git rev-parse HEAD
EXIT 0
OUTPUT 7b82c4489a891bc193aa39a04106efccf909971e
ENV_CMD python -V
EXIT 0
OUTPUT Python 3.14.2
CMD ruff check accel/token_estimator.py accel/config.py accel/mcp_server.py tests/unit/test_mcp_server.py tests/unit/test_token_estimator.py
EXIT 0
OUTPUT_BEGIN
All checks passed!
OUTPUT_END
CMD set PYTHONPATH=x:\MCPs\agent-accel && pytest -q tests/unit/test_token_estimator.py tests/unit/test_mcp_server.py
EXIT 0
OUTPUT_BEGIN
..................                                                       [100%]
18 passed in 4.75s
OUTPUT_END
CMD set PYTHONPATH=x:\MCPs\agent-accel && pytest -q tests/unit/test_index_and_context.py::test_context_pack_snippet_dedupe_and_metrics tests/unit/test_verify_orchestrator.py tests/unit/test_verify_runners.py
EXIT 0
OUTPUT_BEGIN
..........                                                               [100%]
10 passed in 1.71s
OUTPUT_END
CMD set PYTHONPATH=x:\MCPs\agent-accel && python -c "import json, pathlib; d=json.loads(pathlib.Path('.harborpilot/logs/tool_api_tokenizer_latest.json').read_text(encoding='utf-8')); te=d.get('token_estimator',{}); assert int(d.get('estimated_tokens',0))>0; assert str(te.get('backend_used','')) in {'tiktoken','heuristic'}; assert float(te.get('calibration',0))>0; print('tokenizer_e2e_ok', te.get('backend_used'))"
EXIT 0
OUTPUT_BEGIN
tokenizer_e2e_ok tiktoken
OUTPUT_END
ARTIFACT_SHA256 fba9cdac36ab470667d9e8d2038572aaf5d8f6f0529b2163e1ca494e0ba53091
VERIFICATION_END mcp_tokenizer_calibration_20260212_01 2026-02-11T23:04:58.967971+00:00
